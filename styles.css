/* =====================================   Base: variables, reset, body   ===================================== */:root{--bg:#0a0f1a; /* deep navy */--panel:#0f1724; /* panel */--card:#131d2e; /* card */--muted:#9fb0c7; /* muted text */--text:#e8eef6; /* main text */--accent:#00c4a2; /* Progress360 accent */}*{box-sizing:border-box}html,body{height:100%}body{margin:0;background:linear-gradient(180deg,#08101c, #0a1f3d);color:var(--text);font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;}/* Header & page layout */.site-header{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;border-bottom:1px solid rgba(255,255,255,.08);background:rgba(10,15,26,.6);backdrop-filter:blur(8px);position:sticky;top:0;z-index:50}.brand{display:flex;align-items:center;gap:12px}.brand h1{margin:0;font-weight:800;letter-spacing:.2px}.brand .accent{color:var(--accent)}.logo-ring{width:28px;height:28px;border-radius:999px;border:2px solid var(--accent);box-shadow:0 0 12px rgba(0,196,162,.4) inset}.tagline{color:var(--muted);font-size:.95rem}main{max-width:1100px;margin:0 auto;padding:24px}.intro{padding:16px 0;color:var(--muted)}/* Cards & gallery */.gallery{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:16px}.card{background:var(--card);border:1px solid rgba(255,255,255,.06);border-radius:16px;overflow:hidden;box-shadow:0 6px 24px rgba(0,0,0,.25)}.card button{all:unset;display:block;cursor:pointer}.card .thumb{aspect-ratio:16/9;background:#000;display:block;width:100%;object-fit:cover}.card .body{padding:12px 14px}.card .title{font-weight:700}.card .meta{color:var(--muted);font-size:.9rem;margin-top:4px}.card .meta span{opacity:.9}/* Modal shell */.modal{position:fixed;inset:0;display:none;z-index:1000}.modal[aria-hidden="false"]{display:block}.modal-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.45);backdrop-filter:blur(1px)}.modal-inner{position:relative;z-index:2;width:100vw;height:100dvh;margin:0;background:var(--panel);border:none;border-radius:0;box-shadow:none;display:flex;flex-direction:column;overflow-y:auto;-webkit-overflow-scrolling:touch}.edge-toggle{display:none}/* Viewer: header, grid, panels */.viewer-header{display:grid;grid-template-columns:1fr auto 1fr;align-items:center;padding:12px 14px;border-bottom:1px solid rgba(255,255,255,.08);gap:10px}.viewer-header .viewer-actions{grid-column:3;justify-self:end;display:inline-flex;gap:8px}.viewer-header .viewer-title{grid-column:1}.viewer-header .viewer-tip{grid-column:2;color:var(--muted);font-size:.9rem;text-align:center}.viewer-header #closeViewer{grid-column:3;justify-self:end}.viewer-title{display:flex;align-items:baseline;gap:10px}.viewer-title #viewerProjectTitle{font-weight:800}.status{color:var(--muted);font-size:.9rem}.viewer-grid{display:grid;grid-template-columns:minmax(260px,360px) minmax(600px,1fr) minmax(260px,420px);grid-template-rows:1fr auto;gap:16px;padding:16px 0;flex:1;min-height:0}.card-panel{background:var(--card);border:1px solid rgba(255,255,255,.06);border-radius:12px;box-shadow:0 6px 24px rgba(0,0,0,.25);overflow:hidden;display:flex;flex-direction:column}.panel-title{margin:0;padding:10px 12px;border-bottom:1px solid rgba(255,255,255,.08);font-weight:700;display:grid;grid-template-columns:32px 1fr 32px;align-items:center;gap:8px}.panel-title > .toggle-btn,.panel-title > .panel-label,.panel-title > .panel-spacer{grid-row:1}.panel-title .panel-label{text-align:center}.panel-title .toggle-btn{width:32px;height:32px;display:inline-flex;align-items:center;justify-content:center;padding:0;font-size:22px;line-height:1}.panel-title .panel-spacer{width:32px;height:32px}/* Place chevron on the side nearest the center image */.panel-title.chev-right .toggle-btn{grid-column:3}.panel-title.chev-right .panel-label{grid-column:2}.panel-title.chev-right .panel-spacer{grid-column:1}.panel-title.chev-left .toggle-btn{grid-column:1}.panel-title.chev-left .panel-label{grid-column:2}.panel-title.chev-left .panel-spacer{grid-column:3}.left-panel{grid-column:1;grid-row:1 / span 2}.center-panel{grid-column:2;grid-row:1;position:relative;display:flex;flex-direction:column}.right-rail{grid-column:3;grid-row:1 / span 2;display:flex;flex-direction:column;gap:16px;min-height:0}.right-rail .card-panel{flex:0 0 auto}.nav-panel{grid-column:2;grid-row:2; padding:12px; overflow:visible; display:flex; flex-direction:column; align-items:center}.nav-section{display:grid;gap:8px; width:100%; max-width:900px; justify-items:stretch}.nav-section label{text-align:center}.btn-row{display:flex;flex-wrap:wrap;gap:10px;align-items:center; justify-content:center}/* Larger, more touch-friendly timeline buttons without changing card width */.nav-panel .btn-row{gap:16px}.nav-panel .btn-row .btn{padding:10px 18px;min-height:40px;min-width:64px;font-size:.95rem}@media (max-width:1200px){  .nav-panel .btn-row{gap:18px}  .nav-panel .btn-row .btn{padding:12px 20px;min-height:44px;min-width:72px}}#timelineLegend{display:flex;flex-wrap:nowrap;gap:12px;justify-content:space-between;align-items:flex-start;width:100%;padding:0 12px;text-align:center}#timelineLegend span{flex:0 0 auto;white-space:nowrap;opacity:.9}.ticks{width:100%; margin:0; padding:0 12px;}.hint{text-align:center;margin-bottom:8px;opacity:.8}@media (max-width:720px){  .viewer-header{grid-template-columns:1fr auto;grid-auto-rows:auto auto}  .viewer-header .viewer-tip{grid-column:1 / -1; order:2; font-size:.85rem}}/* Timeline ticks */.ticks{position:relative;height:12px;display:flex;justify-content:space-between;align-items:flex-end;padding:0 2px}.ticks .tick{width:2px;height:8px;background:rgba(255,255,255,.25);border-radius:2px}.ticks .tick.active{background:var(--accent);height:12px}.viewer-canvas-wrap{position:relative;flex:1;min-height:65dvh;background:#000;border-radius:12px;overflow:hidden;margin:8px;touch-action:none}.center-panel .viewer-canvas-wrap{border-radius:12px;overflow:hidden;touch-action:none}.controls{display:grid;gap:10px;padding:10px 14px;background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,.01));overflow:auto}.control-group{display:grid;gap:6px}.control-group.row{grid-auto-flow:column;justify-content:start;align-items:center;gap:10px}.legend{display:flex;justify-content:space-between;color:var(--muted);font-size:.85rem}.btn{padding:8px 12px;background:var(--accent);border-radius:10px;color:#05231d;border:1px solid rgba(0,0,0,.12);font-weight:700;cursor:pointer}.btn.ghost{background:transparent;color:var(--text);border:1px solid rgba(255,255,255,.14)}#audioBtn.active{background:var(--accent)!important;color:#05231d!important;border-color:rgba(0,0,0,.2)!important;box-shadow:0 0 0 2px rgba(0,196,162,.25)}/* Subtle pulse when video has audio but playback is muted */@keyframes audioPulse{   0%   { box-shadow: 0 0 0 0 rgba(0,196,162,.45); }  70%  { box-shadow: 0 0 0 10px rgba(0,196,162,0); }  100% { box-shadow: 0 0 0 0 rgba(0,196,162,0); }}#audioBtn.audio-attn{  border-color: rgba(0,196,162,.6) !important;  animation: audioPulse 1.8s ease-out infinite;}#closeViewer{background:#e5484d !important;color:#fff !important;border-color:#ff7a7c !important}#closeViewer:hover{background:#ff4d4f !important;border-color:#ffa3a5 !important}#closeViewer:focus-visible{outline:2px solid #ffc2c4;outline-offset:2px}#mixRange{width:100%}input[type="range"]{width:100%}/* VR button alignment tweak */#viewerCanvasWrap .vr-button-host{position:absolute;right:12px;bottom:12px;z-index:6}/* Overlay controls for fullscreen/VR */#viewerCanvasWrap .fs-overlay{position:absolute;inset:0;display:none;z-index:5;pointer-events:none}#viewerCanvasWrap .fs-overlay .fs-exit{position:absolute;top:12px;right:12px;pointer-events:auto}#viewerCanvasWrap .fs-overlay .fs-nav{position:absolute;left:50%;transform:translateX(-50%);bottom:16px;display:flex;align-items:center;gap:24px;pointer-events:auto}#viewerCanvasWrap .fs-overlay .fs-indicator{padding:8px 14px;border-radius:999px;background:rgba(0,0,0,.5);border:1px solid rgba(255,255,255,.25);color:#fff;font-weight:700;min-width:220px;text-align:center}#viewerCanvasWrap .fs-overlay .btn{backdrop-filter:blur(4px);pointer-events:auto}#viewerCanvasWrap .fs-overlay .btn.big{padding:14px 22px;font-size:1.05rem}/* Viewer: side gallery */.side-gallery{display:grid;grid-template-columns:1fr;gap:8px;padding:10px;overflow:auto}.side-gallery .thumb{width:100%;aspect-ratio:16/9;object-fit:cover;border-radius:8px;border:1px solid rgba(255,255,255,.08);opacity:.85;cursor:pointer}.side-gallery .thumb.active{outline:2px solid var(--accent);opacity:1}/* (Removed width-only tablet stack; handled by orientation rules) *//* (Removed coarse-pointer override; handled by orientation rules) *//* (Removed small-screen width rules; handled by orientation rules) *//* Slightly wider phones: 3-up thumbnails */@media (min-width:480px) and (max-width:720px){  .left-panel .side-gallery{grid-template-columns:repeat(3, minmax(0,1fr)) !important}}/* Info panel styling */.info-panel{padding:10px 12px;display:grid;gap:6px}.info-row{display:flex;justify-content:space-between;gap:12px}.info-row .k{color:var(--muted)}.info-row .v{font-weight:600}.info-panel a{color:var(--accent);text-decoration:none}.info-panel a:hover{text-decoration:underline}hr.info-sep{border:none;border-top:1px solid rgba(255,255,255,.08);margin:6px 0}.info-block{display:flex;flex-direction:column;gap:6px;margin-top:4px}.info-block-title{color:var(--muted);font-weight:700}.info-desc{color:var(--text);opacity:.9;line-height:1.35}/* Badges */.badge{position:absolute;top:8px;left:8px;background:rgba(0,0,0,.55);border:1px solid rgba(255,255,255,.18);color:#fff;border-radius:999px;padding:4px 8px;font-size:.8rem;backdrop-filter:blur(4px)}.badge.video{background:rgba(0,196,162,.2);border-color:rgba(0,196,162,.5);color:#c7fff4}/* Place card badges */.card .badge{top:10px;left:10px}/* Hide site header and disable background scroll while viewer is open */body.viewer-open{overflow:hidden}body.viewer-open .site-header{display:none}/* Ensure canvas fits container; renderer resizes it as well */#viewerCanvasWrap canvas{display:block;width:100%;height:100%;}#viewerCanvasWrap:fullscreen{margin:0;border-radius:0}/* Toasts */.toast-host{position:fixed;top:12px;left:50%;transform:translateX(-50%);display:flex;flex-direction:column;gap:8px;z-index:2000;pointer-events:none}.toast{pointer-events:auto;min-width:220px;max-width:420px;margin:0 auto;padding:10px 14px;border-radius:10px;border:1px solid rgba(255,255,255,.16);background:rgba(15,23,36,.9);box-shadow:0 10px 30px rgba(0,0,0,.35);font-weight:600}.toast.info{border-color:rgba(255,255,255,.18)}.toast.success{border-color:rgba(0,196,162,.5)}.toast.error{border-color:#ff6b6b}.toast-enter{animation:toastIn .18s ease-out both}.toast-exit{animation:toastOut .2s ease-in both}@keyframes toastIn{from{opacity:0;transform:translate(-50%, -8px)}to{opacity:1;transform:translate(-50%, 0)}}@keyframes toastOut{from{opacity:1;transform:translate(-50%, 0)}to{opacity:0;transform:translate(-50%, -8px)}}/* (Desktop grid is already the default; min-width override removed) *//* (Removed unconditional stacked defaults; portrait/landscape handle this selectively) *//* (Removed duplicate desktop min-width block; base desktop styles apply) *//* (Removed special 1024â€“1200 touch override; unified by min-width:1024 rule above) *//* Orientation driven layouts (phones/tablets) *//* Portrait: fully stacked for clarity */@media (orientation: portrait){  .viewer-grid{display:flex !important;flex-direction:column !important;gap:12px !important;padding:12px 0 !important}  .viewer-grid .card-panel{position:static !important;z-index:auto !important;overflow:hidden !important}  .right-rail{order:3 !important;gap:12px !important;position:static !important;z-index:auto !important;padding-bottom:12px}  .nav-panel{order:4 !important;position:static !important;margin-top:12px}  /* Thumbnails: horizontal scroller in portrait */  .left-panel .side-gallery{display:flex !important;flex-wrap:nowrap !important;gap:10px !important;overflow-x:auto !important;overflow-y:hidden !important;padding:10px !important;-webkit-overflow-scrolling:touch;scroll-snap-type:x proximity}  .left-panel .side-gallery .thumb{flex:0 0 auto !important;display:block !important;height:clamp(80px,11dvh,110px) !important;width:auto !important;aspect-ratio:16/9;object-fit:cover;scroll-snap-align:center}}/* Landscape always uses desktop bento; compact mode removed *//* (Removed edge overlay buttons; using header actions instead) *//* Landscape: collapsed states (all widths) */@media (orientation: landscape){  /* Keep 3 tracks; use slim handles so center stays centered and timeline stays in middle */  .viewer-grid.collapse-left{grid-template-columns:40px minmax(600px,1fr) minmax(260px,420px) !important}  .viewer-grid.collapse-right{grid-template-columns:minmax(260px,360px) minmax(600px,1fr) 40px !important}  .viewer-grid.collapse-left.collapse-right{grid-template-columns:40px minmax(600px,1fr) 40px !important}  /* Left collapsed: turn into a full-height handle with centered chevron */  .viewer-grid.collapse-left .left-panel{min-width:40px;max-width:40px;padding:0;border-radius:12px 0 0 12px;overflow:hidden;display:flex;height:100%}  .viewer-grid.collapse-left .left-panel .panel-title{padding:0;border-bottom:none;display:flex;align-items:center;justify-content:center;width:100%;height:100%}  .viewer-grid.collapse-left .left-panel .panel-title .panel-label{display:none}  .viewer-grid.collapse-left .left-panel .panel-title .panel-spacer{display:none}  .viewer-grid.collapse-left .left-panel .panel-title .toggle-btn{width:100%;height:100%;grid-column:1 / -1}  .viewer-grid.collapse-left .left-panel .side-gallery{display:none}  /* Right collapsed: keep a small top card as handle; hide other cards */  .viewer-grid.collapse-right .right-rail{gap:0;padding:0;display:flex;height:100%;flex-direction:column}  .viewer-grid.collapse-right .right-rail .tools-content{display:none}  .viewer-grid.collapse-right .right-rail .right-tools{display:flex;flex:1 1 auto;height:100%;padding:0;border-radius:0 12px 12px 0;overflow:hidden;min-width:40px;max-width:40px}  .viewer-grid.collapse-right .right-rail .right-tools .panel-title{padding:0;border-bottom:none;display:flex;align-items:center;justify-content:center;width:100%;height:100%}  .viewer-grid.collapse-right .right-rail .right-tools .panel-title .panel-label{display:none}  .viewer-grid.collapse-right .right-rail .right-tools .panel-title .panel-spacer{display:none}  .viewer-grid.collapse-right .right-rail .right-tools .panel-title .toggle-btn{width:100%;height:100%;grid-column:1 / -1}}/* Home gallery tweaks by orientation on small screens */@media (orientation: portrait) and (max-width: 900px){  .gallery{grid-template-columns:1fr}}@media (orientation: landscape) and (max-width: 900px){  .gallery{grid-template-columns:repeat(2, 1fr)}}/* Tools content layout */.right-rail .tools-content{display:flex;flex-direction:column;gap:12px;padding:10px;flex:1 1 auto;min-height:0;overflow:auto}/* Fullscreen exit prominence */
#viewerCanvasWrap .fs-overlay{align-items:stretch}
#viewerCanvasWrap .fs-overlay .fs-exit{position:absolute;top:12px;right:12px;display:flex;gap:8px}
#viewerCanvasWrap .fs-overlay .exit-btn{background:#e5484d;color:#fff;border:1px solid #ff7a7c;border-radius:10px;padding:10px 14px;font-weight:800}
#viewerCanvasWrap .fs-overlay .exit-btn:hover{background:#ff4d4f;border-color:#ffa3a5}
@keyframes exitPulse{0%{box-shadow:0 0 0 0 rgba(229,72,77,.45)}70%{box-shadow:0 0 0 10px rgba(229,72,77,0)}100%{box-shadow:0 0 0 0 rgba(229,72,77,0)}}
#viewerCanvasWrap .fs-overlay .exit-btn{animation:exitPulse 2s ease-out 2}

/* --- Pano thumb animation --- */
.card button{position:relative}
.card .thumb-bg{position:absolute;inset:0;background-size:cover;background-position:50% 50%;pointer-events:none;will-change:background-position;opacity:1;z-index:1}
.card:hover .thumb-bg{animation:pano-pan 8s ease-in-out infinite alternate}
@keyframes pano-pan{0%{background-position:0% 50%}100%{background-position:100% 50%}}
@media (prefers-reduced-motion: reduce){.card:hover .thumb-bg{animation:none}}
/* Fullscreen exit prominence */
#viewerCanvasWrap .fs-overlay{align-items:stretch}
#viewerCanvasWrap .fs-overlay .fs-exit{position:absolute;top:12px;right:12px;display:flex;gap:8px}
#viewerCanvasWrap .fs-overlay .exit-btn{background:#e5484d;color:#fff;border:1px solid #ff7a7c;border-radius:10px;padding:10px 14px;font-weight:800}
#viewerCanvasWrap .fs-overlay .exit-btn:hover{background:#ff4d4f;border-color:#ffa3a5}
@keyframes exitPulse{0%{box-shadow:0 0 0 0 rgba(229,72,77,.45)}70%{box-shadow:0 0 0 10px rgba(229,72,77,0)}100%{box-shadow:0 0 0 0 rgba(229,72,77,0)}}
#viewerCanvasWrap .fs-overlay .exit-btn{animation:exitPulse 2s ease-out 2}
# Loading indicators
.card.is-loading{position:relative}
.card.is-loading::after{content:"";position:absolute;inset:0;background:rgba(0,0,0,.35);z-index:2;pointer-events:none}
.card.is-loading::before{content:"";position:absolute;top:50%;left:50%;width:36px;height:36px;margin:-18px 0 0 -18px;border-radius:50%;border:3px solid rgba(255,255,255,.35);border-top-color:var(--accent);animation:p360spin .9s linear infinite;box-shadow:0 2px 16px rgba(0,0,0,.4);z-index:3;pointer-events:none}
@keyframes p360spin{to{transform:rotate(360deg)}}

.viewer-canvas-wrap{position:relative}
.viewer-canvas-wrap .loading-overlay{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;flex-direction:column;gap:10px;background:linear-gradient(180deg,rgba(0,0,0,.35),rgba(0,0,0,.2));z-index:10}
.viewer-canvas-wrap .loading-overlay .spinner{width:42px;height:42px;border-radius:50%;border:3px solid rgba(255,255,255,.35);border-top-color:var(--accent);animation:p360spin .9s linear infinite}
.viewer-canvas-wrap .loading-overlay .loading-text{color:var(--muted);font-weight:600}

/* Canvas overlay for silky-smooth thumb animation */
.card .thumb-canvas{position:absolute;inset:0;z-index:2;pointer-events:none;display:block;width:100%;height:100%}
